<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div>
    <p class="required-fields">Fields marked * are required.</p>
    <h3>Name</h3>
    <div class="radio-buttons-container">
      <span>
        <p-radioButton name="title" value="Mr." formControlName="title" inputId="option1" (click)="selectMrOrMrs()"></p-radioButton>
        <label for="option1" class="ml-2">Mr.</label>
      </span>
      <span>
        <p-radioButton name="title" value="Mrs." formControlName="title" inputId="option2" (click)="selectMrOrMrs()"></p-radioButton>
        <label for="option2" class="ml-2">Mrs.</label>
      </span>
      <span class="other-input-container">
        <p-radioButton name="title" value="Other" formControlName="title" inputId="option3" (click)="selectOtherOption()"></p-radioButton>
        <label for="option3" class="ml-3" *ngIf="!showOtherInput">Other</label>
      </span>
          <!-- Conditionally display input form for "Other" -->
      <div *ngIf="showOtherInput" class="other-title">
        <input pInputText formControlName="otherTitle" id="other-title" type="text" placeholder="* Other Title"/>
        <label for="other-title"></label>
      </div>
    </div>
    
    <div class="input-container">
  <div>
      <input pInputText formControlName="firstName" id="first-name" type="text" placeholder="* First name"/>
      <label for="first-name"></label>

      <div class="error-message">
        <small *ngIf="firstName!.dirty && firstName!.invalid">Name cannot be empty!</small>
      </div>
    </div>
    <div>
      <input pInputText formControlName="lastName" id="last-name" type="text" placeholder="* Last name" />
      <label for="last-name"></label>

      <div class="error-message" style="left: 50%">
        <small *ngIf="lastName!.dirty && lastName!.invalid">Last name cannot be empty!</small>
      </div>
    </div>
  </div>
  
    <div class="input-container">
      <div>
        <input pInputText formControlName="email" id="email" type="email" placeholder="* Email"/>
        <label for="email"></label>
        <p class="credentials">You will need your email to log in to the store.</p>
        <div class="error-message">
          <small *ngIf="email!.dirty && email!.invalid">Invalid email address!</small>
        </div>
      </div>
      <div>
        <input pInputText formControlName="password" id="password" type="password" placeholder="* Password" />
        <label for="password"></label>
        <p class="credentials">Your password needs at least 8 characters.</p>
        <div class="error-message" style="left: 50%">
          <small *ngIf="password!.dirty && password!.invalid">Password is too short!</small>
        </div>
      </div>
    </div>
    
    <h3>Birthdate</h3>
    <div class="input-container">
      <p-calendar [iconDisplay]="'input'" [showIcon]="true" formControlName="birthdate" inputId="birthday"  placeholder="* Birthdate"></p-calendar>
      <div class="error-message">
        <small *ngIf="birthdate!.dirty && birthdate!.invalid">Invalid date!</small>
      </div>
    </div>
 
    <h3>Address</h3>

    <div class="input-container">
      <div>
        <input pInputText formControlName="street" id="street" type="text" placeholder="* Street"/>
        <label for="street"></label>
        <div class="error-message">
          <small *ngIf="street!.dirty && street!.invalid">Street name cannot be empty!</small>
      </div>
    </div>

    <div>
        <input class="street_number" pInputText formControlName="streetNumber" inputId="street_number" id="street-number" placeholder="* No."/>
        <label for="street_number"></label>
        <div class="error-message" style="left: 50%">
          <small *ngIf="streetNumber!.dirty && streetNumber!.invalid">Invalid street number!</small>
        </div>
      </div>

    </div>
    <div class="input-container">
      <div>
      <input pInputText formControlName="zipCode" id="zip-code" type="text" placeholder="* Postcal Code"/>
      <label for="zip-code"></label>
      <div class="error-message">
        <small *ngIf="zipCode!.dirty && zipCode!.invalid">Invalid postal code!</small>
      </div>
    </div>

    <div>
      <input pInputText formControlName="city" id="city" type="text" placeholder="* City"/>
      <label for="city"></label>
      <div class="error-message" style="left: 50%">
        <small *ngIf="city!.dirty && city!.invalid">City cannot be empty!</small>
      </div>
    </div>

  </div>
  <div class="input-container">
    <p-dropdown [options]="countries" optionLabel="label" optionValue="value" formControlName="country" [showClear]="true" placeholder="* Country"></p-dropdown>

    <!-- This error won't ever show as since we have a dropdown, it is only considered "dirty" when a country has been selected,
    at which point it stops being invalid. An alternative method would be to not check if it's "dirty", but then it would immediately
    show an error message, before the user has chosen anything.-->
    <div class="error-message">
      <small *ngIf="country?.invalid && (country?.touched || formSubmitted)">Please select a country!</small>
    </div>
  </div>

  <p id="default-address">Your address will be used as the default shipping address.</p>
  <button type="submit" pButton pRipple label="Submit" class="p-button-success"></button>
  </div>
</form>