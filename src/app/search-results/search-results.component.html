<div class="result-info-container">
  <div class="results-info">{{ filteredProducts.length }} results for <span class="search-value">"{{ searchValue }}"</span></div>
  <div class="sorting">
    <p-dropdown
      [options]="sortOptions"
      [(ngModel)]="selectedSortOption"
      placeholder="Sort by"
      (onChange)="onSortChange($event)"
    ></p-dropdown>
  </div>
</div>

<div class="search-container">
  <div class="filters-container">
    <div class="filter-title">
      <h4>Brands</h4>
      <div *ngFor="let brand of brandList">
        <input
          type="checkbox"
          [value]="brand"
          (change)="onBrandFilterChange($event)"
        />{{ brand }}
      </div>
    </div>

    <div class="price-filter">
      <h4 class="price-filter-title">Price Range</h4>
      <p-slider 
        [(ngModel)]="priceRange"
        [min]="minPrice" 
        [max]="maxPrice" 
        [range]="true"
        (onSlideEnd)="onPriceFilterChange()">
      </p-slider>
      <div class="price-filter-values">Min: {{ priceRange[0] }} - Max: {{ priceRange[1] }}</div>
    </div>
    
    
  
 
    <div class="filter-title categories-filter-container">
      <h4>Categories</h4>
      <p-dropdown [options]="categoryList" [(ngModel)]="selectedCategory" (onChange)="onCategoryFilterChange($event)"></p-dropdown>

    </div>
    
    <div class="filter-title">
      <h4>Gender</h4>
      <div *ngFor="let gender of genderList">
        <input
          type="checkbox"
          [value]="gender"
          (change)="onGenderFilterChange($event)"
          [checked]="selectedGenders.includes(gender)"
        />{{ gender }}
      </div>
    </div>

    <div class="filter-title">
      <h4>Sizes</h4>
      <div class="sizes-container custom-dropdown-wrapper">
        <div class="select-all-checkbox">
          <input type="checkbox" (change)="toggleSelectAllSizes($event)" [checked]="areAllSizesSelected()">
        </div>
        <p-multiSelect 
          class="sizes-container" 
          [options]="sizeListOptions" 
          [(ngModel)]="selectedSizes" 
          (onChange)="onSizeFilterChange($event)" 
          [style]="{ 'width.px': 200 }" 
          placeholder="All">
          <ng-template pTemplate="header">
          </ng-template>
        </p-multiSelect>
      </div>
    </div>
    
    <div class="filter-title color-filter-container">
      <div class="color-title">Colors</div>
      <div *ngFor="let color of colorList" class="color-box-container">
        <div 
          [style.background-color]="color.color_hex" 
          class="color-box" 
          [class.selected]="selectedColors.includes(color.color_name)" 
          (click)="onColorBoxClick(color.color_name)"
        >
          <span class="color-name" [class.dark-text]="isColorDark(color.color_name)">{{ color.color_name }}</span>
          <i class="pi pi-check" *ngIf="selectedColors.includes(color.color_name)" [class.dark-text]="isColorDark(color.color_name)"></i>
        </div>
      </div>
    </div>
    

  </div>

  <div class="results-container">
    <app-product-list class="search-results-product-list"
    [searchValue]="searchValue"
    [selectedBrands]="selectedBrands"
    [products]="filteredProducts"
    [selectedColors]="selectedColors"
  ></app-product-list>
  
  </div>
</div>
